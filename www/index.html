<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>TITLE</title>
    <link rel="icon" type="image/png" href="http://interactive.nydailynews.com/favicons.png">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon" href="">
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <!-- Titles -->
    <meta property="og:title" content='TITLE' />
    <meta name="twitter:title" content='TITLE' />

    <!-- Descriptions -->
    <meta name="description" content="DESC" />
    <meta property="og:description" content="DESC" />
    <meta name="twitter:description" content="DESC" />

    <!-- KEYWORD -->
    <meta name="keywords" content="TAGS" />

    <!-- LINK -->
    <link rel="canonical" href="CANONICAL">
    <meta property="og:url" content="CANONICAL" />
    <meta name="twitter:url" content="CANONICAL" />

    <!-- THUMBNAIL IMAGE-->
    <meta property="og:image" content="CANONICALimg/share.png" />
    <meta name="twitter:image" content="CANONICALimg/share.png" />
    <meta name="twitter:image:alt" content="A description of the twitter image" />
    <meta property="og:image:width" content="1024" />
    <meta property="og:image:height" content="512" />

    <!-- PARSELY -->
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "NewsArticle",
            "headline": "TITLE",
            "url": "CANONICAL",
            "thumbnailUrl": "CANONICALimg/share.png",
            "dateCreated": "2018-06-18T06:00:00Z",
            "articleSection": "Opinion",
            "creator": ["Michael Aronson", "Interactive Project", "Joe Murphy"],
            "keywords": ["interactive project","interactive","interactive spreadsheet","shsat", "new york public schools"]
        }
    </script>

    <!-- NO NEED TO FILL -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@nydailynews">
    <meta name="twitter:creator" content="@nydni">
    <meta name="decorator" content="responsive" />
    <meta name="nydn_section" content="NY Daily News" />
    <meta name="msvalidate.01" content="02916AAC0DA8B068EFE01D721E03ED7E" />
    <meta name="p:domain_verify" content="78efe4f5c9935744af497772f68a0ee7" />
    <meta property="fb:app_id" content="107464888913" />
    <meta property="fb:admins" content="1594068001" />
    <meta property="fb:pages" content="268914272540" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="NY Daily News" />
    <meta property="article:publisher" content="https://www.facebook.com/NYDailyNews/" />
    <meta name="localeCountry" content="US"/>
    <meta name="localeLanguage" content="en" />

    <!-- ADOBE ANALYTICS -->
    <script src="//assets.adobedtm.com/4fc527d6fda921c80e462d11a29deae2e4cf7514/satelliteLib-c91fdc6ac624c6cbcd50250f79786de339793801.js"></script>
    <link rel="stylesheet" href="//interactive.nydailynews.com/nydn/c/rh.css">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Open+Sans+Condensed:300,700|PT+Serif" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.10.18/r-2.2.2/datatables.min.css"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.0.1/css/responsive.dataTables.min.css">
    <script data-main="//interactive.nydailynews.com/nydn/js/rh.js?r=20170405001" src="//www.nydailynews.com/nydn/js/require.js?r=2016LIST" defer></script>
      
    <script>
        var nydn = nydn || {
            "section": "NYDailyNews",
            "subsection": "news",
            "template": "article",
            "revision": "201609014009",
            "bidder": { contains: function() {} },
            "targetPath": document.location.pathname
        };
        var nydnDO = [ { 
            'title':'xxxTITLExxx', 
            'link':'CANONICAL', 
            'p_type':'interactive', 
            'section':'interactive' 
        }];
    </script>
    
    <!-- ADS-START -->
    <script onload="nydn_ads('one');" src="/includes/template/template.js"></script>
    <!-- ADS-END -->

    <!--
    <script src="/js/jquery.min.js"></script>
    -->
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>

    <script>var nav_params = {section: 'opinion', url: 'http://www.nydailynews.com/opinion/'};</script>
    <script src="/library/vendor-nav/vendor-include.js" defer></script>
</head>

<body id="nydailynews" data-section="nydailynews" data-subsection="NY Daily News">

<!-- SITEHEADER-START -->
<header id="templateheader"></header>
<!-- SITEHEADER-END -->

<!-- CONTENT-START -->
<main>
    <article>
        <div>
    
<!--
  <div class="ad center">
    <div id='div-gpt-ad-1423507761396-1'>
      <script>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423507761396-1'); });
      </script>
    </div>
  </div>
-->


<style>
body {
    font: 14px/18px "Open Sans", sans-serif;
}
article h2 {
    line-height: 30px;
}
article input {
    border: 1px solid #999;
}
article tr th {
    max-height: 25px;
}
.sorting_1 { background-color: #dfdfdf; }
.odd .sorting_1 { background-color: #d0d0d0; }
#school-table_filter {
    float: left;
    margin: 15px 0;
}
body li span {
    font-size: 12px;
    line-height: 10px;
}
table.dataTable>tbody>tr.child ul.dtr-details>li {
    padding: 0.1em 0;
}
table.dataTable thead th, table.dataTable thead td {
    font-size: 13px;
    padding: 5px 15px 5px 3px;
}
.dataTables_length { 
    clear: both;
}
#school-table_filter > label { text-transform: uppercase; font-size: 30px; }
#school-table_filter > label > input { height: 24px; width: 200px; }
tr td {
    text-align: center;
}
tr > td:nth-child(2) {
    text-align: left;
    min-width:150px;
}



#school-detail {
    padding: 10px 25px 10px 25px;
    margin: 25px 10px;
}
#school-detail h3 {
    font-size: 28px;
}
#school-detail h4 {
    font-size: 20px;
}
#school-detail p {
    margin: 0 10px 10px 0;
}
#school-detail dt {
    float: left;
    color: #333;
    font-weight: bold;
}
#school-detail dt:after {
    content: ':';
}
#school-detail dd {
    text-indent: 5px;
    margin-bottom: 5px;
}
.highlight {
    background-color: #f5b093;
    transition: all 3s ease;
}
.bye-highlight {
    background-color: #fff;
    transition: all 3s ease;
}
</style>
    <section>
        <h1 style="font-size:48px;">How would your middle school be affected by de Blasio’s SHSAT plan?</h1>

        <h2 style="font-size:36px;">NYC middle school SHSAT database, 2017-2018 school year</h2>
        <p>
            This is a table of Specialized High School Admissions (SHSAT) offers to NYC public-school 8th graders for offers of admission for the Fall 2018 school year. You can sort the table by any of its fields.
        </p>
        <p>
            Of note: The 7% column shows how many students from that school would be admitted to specialized high schools under Mayor de Blasio’s plan. <strong>Admitted students must also be in the top 25% citywide. This requirement is not factored into our calculations.</strong>
            The column following the 7%, the Change column, is a calculation that shows how many more or less students from that middle school would have admission offers to the specialized high schools.
        </p>
        <section id="school-detail">
        </section>
        <table id="school-table" class="stripe table-bordered responsive">
            <thead>
                <tr>
                    <th class="all"></th>
                    <th class="all">School</th>
                    <th class="tablet desktop">Borough</th>
                    <th class="tablet desktop">8th graders</th>
                    <th class="tablet desktop">Tested</th>
                    <th class="tablet desktop">Accepted</th>
                    <th class="tablet desktop">7%</th>
                    <th class="all">Change</th>
                    <th class="desktop">%&nbsp;Tested</th>
                    <th class="desktop">%&nbsp;Accepted</th>
                    <th class="desktop">%&nbsp;Accepted Overall</th>
                    <th class="desktop">%&nbsp;Asian</th>
                    <th class="desktop">%&nbsp;Black</th>
                    <th class="desktop">%&nbsp;Hispanic</th>
                    <th class="desktop">%&nbsp;White</th>
                    <th class="none">%&nbsp;With&nbsp;Disabilities</th>
                    <th class="none">%&nbsp;<abbr title="English Language Learner">ELL</abbr></th>
                    <th class="desktop">%&nbsp;Poverty</th>
                    <th class="none">Economic Need Index</th>
                </tr>
            </thead>
            <tfoot>
            </tfoot>
        </table>
<script>
// Sort additions adapted from https://stackoverflow.com/questions/25944854/sorting-alphabetical-order-to-ignore-empty-cells-datatables
var school = {
    data: {},
    data_keys: ["borough", "eighth-graders", "tested", "passed", "seven-percent", "gain-loss", "%-tested", "%-passed", "%-passed-overall", "%-asian", "%-black", "%-hispanic", "%-white", "%-with-disabilities", "%-ell", "%-poverty", "economic-need-index"],
    data_keynames: {
        "borough": "Borough",
        "tested": "8th graders tested",
        "passed": "8th graders accepted",
        "eighth-graders": "8th graders",
        "seven-percent": "7% of total 8th graders",
        "gain-loss": "Change in accepted",
        "%-tested": "Percent tested",
        "%-passed": "Percent accepted",
        "%-passed-overall": "Percent of total 8th graders tested",
        "%-asian": "Percent Asian",
        "%-black": "Percent Black",
        "%-hispanic": "Percent Hispanic",
        "%-white": "Percent White",
        "%-with-disabilities": "Percent with disabilities",
        "%-ell": "Percent English language learner",
        "%-poverty": "Percent below poverty line",
        "economic-need-index": "Economic Need Index"
    },
	hash: document.location.hash,
    blurb: function(d) {
        // Return markup suitable for a school detail view.
        var passed = d['passed'];
        if ( passed === 's' ) passed = '< 6';
        else if ( passed === '' ) passed = 'zero';
        else if ( +passed < 11 ) passed = utils.ap_numerals[+passed];

        var tested = d['tested'];
        if ( tested === '' ) tested = 'none';
        var increase_decrease = 'increase';
        if ( Math.abs(d['gain-loss']) !== +d['gain-loss'] ) increase_decrease = 'decrease';

        var gain_loss = Math.abs(d['gain-loss']);
        var s = 's';
        if ( gain_loss === 1 ) s = '';
        if ( +gain_loss < 11 ) gain_loss = utils.ap_numerals[+gain_loss];
        var increase_sentence = 'This would be a ' + increase_decrease + ' of ' + gain_loss + ' student' + s + ' for ' + d['school'] + '.';
        if ( gain_loss === 'zero' ) increase_sentence = '';

        var admission_sentence = 'Of those, ' + passed + ' received offers of admission to one of the eight specialized high schools.\n';
        if ( d['tested'] === '' ) admission_sentence = '';

        var s = 's';
        if ( +d['seven-percent'] === 1 ) s = '';
        var seven_percent = d['seven-percent'];
        if ( +seven_percent < 11 ) seven_percent = utils.ap_numerals[+seven_percent];

        var markup = '\n\
     <p>\n\
        In the 2017-2018 school year, ' + d['school'] + ' had ' + d['eighth-graders'] + ' 8th graders\n\
        and of those, ' + tested + ' took the Specialized High School Admissions Test.\n\
        ' + admission_sentence + '\n\
     </p>\n\
     <p>\n\
     <strong>Under the bill that Mayor de Blasio supports</strong>, the SHSAT would end\n\
        and the top 7% of 8th graders at each middle school would be offered admission,\n\
        provided those students were in the top 25% of students citywide.\n\
      </p>\n\
      <p>\n\
        The top 7% will be calculated based on “multiple measures of student achievement,”\n\
        according to the proposed legislation. The measures including\n\
        academic course grades and standardized test scores.\n\
      </p>\n\
      <p>\n\
        Seven percent of the ' + d['eighth-graders'] + ' eighth-graders at ' + d['school'] + ' would be\n\
        ' + seven_percent + ' student' + s + '.\n\
        ' + increase_sentence + '\n\
      </p>\n\
      <p>\n\
        Students not in the top 7% who have G.P.A.’s of at least 3.7 would be eligible\n\
        for admission through a random drawing. The random drawing will also include\n\
        students in private or religious schools.\n\
     </p>\n\
\n\
     <p class="social-share"><em>\n\
        <a href="mailto:?subject=How%20' + d['school'] + '%20would%20be%20affected%20by%20de%20Blasio\'s%20plan&body=' + document.location.href + '">Email a link to this ' + d['school'] + ' profile</a>,\n\
        <a href="">tweet a link to this ' + d['school'] + ' profile</a></em>\n\
    </p>\n\
';
        return markup;
    },
    demographics: function(d) {
        // Return a dl element suitable for displaying school demographic info.
        var dl = document.createElement('dl');
        for ( var i = 0; i < this.data_keys.length; i ++ ) {
            var key = this.data_keys[i];
            var dt = document.createElement('dt');
            dt.textContent = this.data_keynames[key];
            dl.appendChild(dt);
            var percent = '';
            if ( this.data_keynames[key].indexOf('Percent') !== -1 && d[key] !== 'n/a' && d[key] !== '' ) percent = '%';
            var dd = document.createElement('dd');
            var val = d[key] + percent;
            if ( val === 's' ) val = '< 6';
            dd.textContent = val;
            dl.appendChild(dd);
        }
        return dl;
    },
    detail: function(slug) {
        // Display and scroll to the detail view for a school.

        console.log(school.data[slug]);

        var d = school.data[slug];
        var el = document.getElementById('school-detail');
        el.innerHTML = '';

        var h = document.createElement('h3');
        h.textContent = d['school'];
        var div = document.createElement('div');
        div.innerHTML = school.blurb(d);
        el.appendChild(h);
        el.appendChild(div);

        // Add the school demographics
        var h = document.createElement('h4');
        h.textContent = d['school'] + ' demographics, 2017-2018 school year';
        h.id = 'school-demographics';
        el.appendChild(h);
        var dl = this.demographics(d);
        el.appendChild(dl);

        // Make it pop
        $('html, body').animate({
            scrollTop: $("#school-detail").offset().top
        }, 2000);

        $(el).addClass('highlight');
    },
    init: function() {
		// If we've got hash values on page load that means we load a school detail
		if ( this.hash !== '' && this.hash !== '#dev' )
		{
			var item = this.hash.substring(1);
			this.detail(item);
		}
    }
};

function school_detail(hey) { console.log('sdfsdf'); console.log(hey); }
$.getJSON('data/shsat.json', function(data) {
    jQuery.extend( jQuery.fn.dataTableExt.oSort, {
        "non-empty-string-asc": function (str1, str2) {
            if(str1 == "")
                return 1;
            if(str2 == "")
                return -1;
            return ((str1 < str2) ? -1 : ((str1 > str2) ? 1 : 0));
        },
     
        "non-empty-string-desc": function (str1, str2) {
            if(str1 == "")
                return 1;
            if(str2 == "")
                return -1;
            return ((str1 < str2) ? 1 : ((str1 > str2) ? -1 : 0));
        },
            
        "non-empty-int-asc": function (str1, str2) {
            if(str1 == "")
                return 9999;
            if(str2 == "")
                return -9999;
            return ((str1 < str2) ? -1 : ((str1 > str2) ? 1 : 0));
        },
     
        "non-empty-int-desc": function (str1, str2) {
            if(str1 == "")
                return 9999;
            if(str2 == "")
                return -9999;
            return ((str1 < str2) ? 1 : ((str1 > str2) ? -1 : 0));
        }
    } );

    $('#school-table').dataTable( { 
    responsive: {
        details: true
    },
    data: data,
    order: [ 7, "asc" ],
    paging: true,
    pagingType: 'numbers',
    pageLength: 20,
    lengthMenu: [[10, 20, 50, -1], [10, 20, 50, "All"]],
    columns: [ 
        {
            className: 'details-control',
            orderable: false,
            data: null,
            defaultContent: ''
        },
        {   data: "school",
            render: function ( data, type, row ) {
                var slug = utils.slugify(data);
                if ( type === 'display' || type === 'filter' ) {
                    // Add the detail data to the school object
                    // if it's not already in there.
                    return '<a href="#' + slug + '"\n\
                        onClick="school.detail(\'' + slug + '\');">\n\
                        ' + data + '</a>';
                }
				else if ( type === 'type' ) {
                    if ( typeof school.data[slug] === 'undefined' ) school.data[slug] = row;
				}
                return data;
            }
        },
        {   data: "borough" },
        {   data: "eighth-graders" },
        {   data: "tested",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( data === 's' ) {
                    if ( type == 'display' || type == 'filter' ) return '< 6';
                    else return 4;
                }
                return data;
            }
        },
        {   data: "passed",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( data === 's' ) {
                    if ( type == 'display' || type == 'filter' ) return '< 6';
                    else return 4;
                }
                return data;
            }
        },
        {   data: "seven-percent" },
        {   data: "gain-loss",
            type: 'non-empty-int',
        },
        {   data: "%-tested",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' && data !== 'n/a' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-passed",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-passed-overall",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-asian",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-black",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-hispanic",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-white",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-with-disabilities",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-ell",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "%-poverty",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                if ( type == 'display' || type == 'filter' ) {
                    if ( data !== '' ) return data + '%';
                }
                return data;
            }
        },
        {   data: "economic-need-index",
            type: 'non-empty-int',
            render: function ( data, type, row ) { 
                return data;
            }
        },
    ],
    autoWidth: false,
    //deferRender: true,
    dom: '<"top">f<"clear">l<"clear">tip',
    // https://github.com/cyberhobo/ColumnFilterWidgets
    oColumnFilterWidgets: {
        aiExclude: [ 0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18 ],
        // sSeparator: ',  ',
        bGroupTerms: false,
    }
    });
    school.init();
}); // end getJSON
</script>
</section>


        </div>
    </article>
</main>

  <div class="ad center">
    <div id='div-gpt-ad-1423507761396-3'>
      <script>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1423507761396-3'); });
      </script>
    </div>
  </div>
<script src="js/app.js"></script>
<script src="https://cdn.datatables.net/v/dt/dt-1.10.18/r-2.2.2/datatables.min.js"></script>
<!--
<script src="js/ColumnFilterWidgets.js"></script>
-->

<!-- CONTENT-END -->

<!-- FOOTER-START -->
<footer id="templatefooter"></footer>
<!-- FOOTER-END -->
<div id="ra-bp">
      </div> <section id="rao">  <div id="rao-close"></div> <div id="rao-wrap"></div> </section>
</div>
<div id="r-scripts">
    <div id="parsely-root" style="display: none">
        <span id="parsely-cfg" data-parsely-site="nydailynews.com"></span>
    </div>
    <div class="r-ad">
        <div id="div-gpt-ad-x100">
        </div>
    </div>
</div>
</body>
</html>
